import pathlib

import anywidget
import traitlets

bundled_path = pathlib.Path(__file__).parents[1] / "static"


class {{ v_component.name.removeprefix("V") }}(anywidget.AnyWidget):
    """The {{ v_component.name.removeprefix("V") }} component.

    {{ v_component.description }}

    Args:
        children: The child nodes of the DOM element.
{%- for p in v_component.attributes %}
        {{ p.name | to_snake }}: {{ p.description | default("No description available.") }}
{%- endfor %}

    Returns:
        A {{ v_component.name }} widget.

    seealso:
        `{{ v_component["doc-url"] }}`__
    """

    _esm = bundled_path / "{{ v_component.name }}.mjs"
    _css = bundled_path / "{{ v_component.name }}.css"

    children = traitlets.Any(allow_none=True).tag(sync=True)
    """The child nodes of the DOM element."""

{%- for p in v_component.attributes %}

    {{ p.name | to_snake }} = traitlets.{{ p.value.type | map_type }}(allow_none=True).tag(sync=True)
    """{{ p.description | default("No description available.") }}"""
{%- endfor %}

    def __init__(
        self,
        children=None,
        {%- for p in v_component.attributes %}
        {{ p.name | to_snake }}={{ p.get("default", "null") | map_default }},
        {%- endfor %}
        **kwargs
    ):
        """Initialize a {{ v_component.name.removeprefix("V") }} widget."""
        self.children = children
        {%- for p in v_component.attributes %}
        self.{{ p.name | to_snake }} = {{ p.name | to_snake }}
        {%- endfor %}

        super().__init__(**kwargs)